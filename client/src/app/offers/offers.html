<md-divider></md-divider>

<!-- Offer list -->
<div ng-cloak ng-show="!logged">
	<md-content layout="row" class="offers_body">
		<md-tabs md-dynamic-height md-border-bottom flex layout="column">
			<md-tab label="Ofertas">
				<md-content layout-padding flex="100">
					<md-list flex="100" class="no-offers" ng-show="$ctrl.offers.length == 0">
						<md-list-item>
							<md-button flex ng-disabled="true" class="md-raised md-primary">Debes estar registrado para crear tus ofertas</md-button>
						</md-list-item>
						<md-list-item flex layout-align="center">
							<span layout-align="center" flex class="no-offers-text"> No hay ofertas que mostrar ≧△≦</span>
						</md-list-item>
					</md-list>
					<md-list flex="100" ng-show="$ctrl.offers.length != 0">
						<md-list-item>
							<md-button flex ng-disabled="true" class="md-raised md-primary">Debes estar registrado para crear tus ofertas</md-button>
						</md-list-item>
						<md-list-item flex layout-align="center" ng-show="$ctrl.offers.length == 0">
							<span layout-align="center" flex class="no-offers-text"> No hay ofertas que mostrar ≧△≦ </span>
						</md-list-item>
						<md-list-item ng-repeat="offer in $ctrl.offers">
							<md-card flex layout-padding layout="row">
								<md-card-title layout="column">
									<md-card-title-text>
										<span class="md-headline">
											{{offer.offer_name}}
										</span>
										<span class="md-subhead">
											<md-icon md-font-icon="event">event</md-icon>
											{{offer.activity_date | date: medium}}
											<md-icon md-font-icon="place">place</md-icon>
											{{offer.place}}
										</span>
									</md-card-title-text>
								</md-card-title>
								<md-card-actions layout="column" layout-align="end center">
									<md-button href="#/detail/{{offer.id}}" class="md-raised md-primary">Ver Más</md-button>
								</md-card-actions>
							</md-card>
						</md-list-item>
					</md-list>
				</md-content>
			</md-tab>
		</md-tabs>
		<div layout="column" layout-padding ng-show="isVisibleOpen()" class="filter_icon">
			<md-button class="md-icon-button md-accent" aria-label="Abrir Menu" ng-click="$ctrl.closeBar()">
				<i class="material-icons">search</i>
			</md-button>
		</div>
		<div layout="column" layout-padding ng-show="!check_size()" class="filter_icon">
			<md-button class="md-icon-button md-accent loupe" aria-label="Abrir Menu" ng-click="$ctrl.toggleBar()">
				<i class="material-icons">search</i>
			</md-button>
		</div>
		<div layout="column" layout-padding ng-show="isVisibleClosed()" class="filter_icon">
			<md-button class="md-icon-button md-accent" aria-label="Cerrar Menu" ng-click="$ctrl.closeBar()">
				<i class="material-icons">keyboard_arrow_right</i>
			</md-button>
		</div>
		<md-sidenav ng-show="isVisible()" class="md-sidenav-right sidenav-color" style="border-left:1px solid #DCDCDC" md-component-id="right" md-is-locked-open="$mdMedia('(min-width: 850px)')">
			<div>
				<md-content class="trasparent">
					<div class="filter" class="filter_input trasparent" layout-padding>
						<form ng-keypress="$ctrl.filter_bar()">
							<md-input-container  md-no-float class="filter_input">
								<md-icon class="material-icons">search</md-icon>
								<input class="visible no_border" name="search" ng-model="$ctrl.search" placeholder="Búsqueda de ofertas">
							</md-input-container>
						</form>
					</div>
					<div layout-padding>
						<h4 class="filter_header trasparent">Categorías</h4>
						<div ng-repeat="cat in $ctrl.categories">
							<md-checkbox class="filter_input" ng-checked="exists(cat, $ctrl.category)" ng-click="toggle(cat,  $ctrl.category)">
								{{ cat.category_name }}
							</md-checkbox>
						</div>
						<h4 class="filter_header trasparent">Orden de las ofertas</h4>
						<md-select class="filter_input trasparent" ng-change="$ctrl.filter_bar()" placeholder="Orden" ng-model="$ctrl.sort_value">
							<md-option value="pub_date">Fecha de creación</md-option>
							<md-option value="activity_date">Fecha de la oferta</md-option>
						</md-select>
						<h4 class="filter_header trasparent">Búsqueda por fecha</h4>
						<md-datepicker flex ng-change="$ctrl.filter_bar()" ng-model="$ctrl.ini_date" md-placeholder="Fecha Inicial" md-min-date="$ctrl.min_date"></md-datepicker>
						<md-datepicker flex ng-change="$ctrl.filter_bar()" ng-model="$ctrl.fin_date" md-placeholder="Fecha Final" md-min-date="$ctrl.min_date"></md-datepicker>
					</div>
				</md-content>
			</div>
		</md-sidenav>
	</md-content>
</div>
<div ng-cloak ng-show="logged">
	<md-content layout="row"  class="offers_body">
		<md-tabs md-dynamic-height md-border-bottom flex layout="column">
			<md-tab label="Ofertas">
				<md-content layout-padding flex="100" >
					<md-list flex="100" class="no-offers" ng-show="$ctrl.offers.length == 0 || isAllMine()">
						<md-list-item>
							<md-button flex md-colors="{background: 'green'}" class="md-raised md-primary" href="#/new-offer">Crea tu propia oferta</md-button>
						</md-list-item>
						<md-list-item flex layout-align="center">
							<span layout-align="center" flex class="no-offers-text"> No hay ofertas que mostrar ≧△≦</span>
						</md-list-item>
					</md-list>
					<md-list flex="100" ng-show="$ctrl.offers.length != 0 && !isAllMine()">
						<md-list-item>
							<md-button flex md-colors="{background: 'green'}" class="md-raised md-primary" href="#/new-offer">Crea tu propia oferta</md-button>
						</md-list-item>
						<md-list-item ng-repeat="offer in $ctrl.offers | filter:{ user:{ id: '!' + user.id } }">
							<md-card flex layout-padding layout="row">
								<md-card-title layout="column">
									<md-card-title-text>
										<span class="md-headline">
											{{offer.offer_name}}
										</span>
										<span class="md-subhead">
											<md-icon md-font-icon="event">event</md-icon>
											{{offer.activity_date | date: medium}}
											<md-icon md-font-icon="place">place</md-icon>
											{{offer.place}}
											<md-icon md-font-icon="place">category</md-icon>
											{{offer.categories}}
										</span>
									</md-card-title-text>
								</md-card-title>
								<md-card-actions layout="column" layout-align="end center">
									<md-button href="#/detail/{{offer.id}}" class="md-raised md-primary">Ver Más</md-button>
								</md-card-actions>
							</md-card>
						</md-list-item>
					</md-list>
				</md-content>
			</md-tab>
			<md-tab label="Creadas por mi" >
				<md-content layout-padding flex="100">
					<md-list flex="100" class="no-offers" ng-show="!isMine()">
						<md-list-item>
							<md-button flex md-colors="{background: 'green'}" class="md-raised md-primary" href="#/new-offer">Crea tu propia oferta</md-button>
						</md-list-item>
						<md-list-item flex layout-align="center">
							<span layout-align="center" flex class="no-offers-text"> ¡Crea tu primera oferta! (>‿◠)✌</span>
						</md-list-item>
					</md-list>
					<md-list flex="100" ng-show="isMine()">
						<md-list-item>
							<md-button flex md-colors="{background: 'green'}" class="md-raised md-primary" href="#/new-offer">Crea tu propia oferta</md-button>
						</md-list-item>
						<md-list-item ng-repeat="offer in $ctrl.myoffers | filter:{ user:{ id:user.id } }">
							<md-card flex layout-padding layout="row">
								<md-card-title layout="column">
									<md-card-title-text>
										<span class="md-headline" layout="row">
											<div layout="column" flex="70">
												{{offer.offer_name}}
											</div>
										</span>
										<span class="md-subhead">
											<md-icon md-font-icon="event">event</md-icon>
											{{offer.activity_date | date: medium}}
											<md-icon md-font-icon="place">place</md-icon>
											{{offer.place}}
											<md-icon md-font-icon="place">category</md-icon>
											{{offer.categories}}
										</span>
									</md-card-title-text>
								</md-card-title>

								<md-card-actions layout="column" layout-align="end center">
									<md-button href="#/detail/{{offer.id}}" class="md-raised md-primary">Ver Más</md-button>
								</md-card-actions>
							</md-card>
						</md-list-item>
					</md-list>
				</md-content>
			</md-tab>
			<md-tab label="Favoritos" >
				<md-content layout-padding flex="100">
					<md-list flex="100" class="no-offers" ng-show="$ctrl.favorites.length == 0">
						<md-list-item flex layout-align="center" ng-show="$ctrl.favorites.length == 0">
							<span layout-align="center" flex class="no-offers-text"> Aún no tienes ninguna actividad favorita (^_^;)</span>
						</md-list-item>
					</md-list>
					<md-list flex="100" ng-show="$ctrl.favorites.length != 0">
						<md-list-item ng-repeat="fav in $ctrl.favorites">
							<md-card flex layout-padding layout="row">
								<md-card-title layout="column">
									<md-card-title-text>
										<span class="md-headline">
											{{fav.offer_name}}
										</span>
										<span class="md-subhead">
											<md-icon md-font-icon="event">event</md-icon>
											{{fav.activity_date | date: medium}}
											<md-icon md-font-icon="place">place</md-icon>
											{{fav.place}}
											<md-icon md-font-icon="place">category</md-icon>
											{{offer.categories}}
										</span>
									</md-card-title-text>
								</md-card-title>
								<md-card-actions layout="column" layout-align="end center">
									<md-button href="#/detail/{{fav.id}}" class="md-raised md-primary">Ver Más</md-button>
								</md-card-actions>
							</md-card>
						</md-list-item>
					</md-list>
				</md-content>
			</md-tab>
		</md-tabs>
		<div layout="column" layout-padding ng-show="isVisibleOpen()" class="filter_icon">
			<md-button class="md-icon-button md-accent" aria-label="Abrir Menu" ng-click="$ctrl.closeBar()">
				<i class="material-icons">search</i>
			</md-button>
		</div>
		<div layout="column" layout-padding ng-show="!check_size()" class="filter_icon">
			<md-button class="md-icon-button md-accent loupe" aria-label="Abrir Menu" ng-click="$ctrl.toggleBar()">
				<i class="material-icons">search</i>
			</md-button>
		</div>
		<div layout="column" layout-padding ng-show="isVisibleClosed()" class="filter_icon">
			<md-button class="md-icon-button md-accent" aria-label="Cerrar Menu" ng-click="$ctrl.closeBar()">
				<i class="material-icons">keyboard_arrow_right</i>
			</md-button>
		</div>
		<md-sidenav ng-show="isVisible()" class="md-sidenav-right sidenav-color" style="border-left:1px solid #DCDCDC" md-component-id="right2" md-is-locked-open="$mdMedia('(min-width: 850px)')">
			<div>
				<md-content class="trasparent">
					<div class="filter trasparent" class="filter_input" layout-padding>
						<form ng-keypress="$ctrl.filter_bar()">
							<md-input-container  md-no-float class="filter_input">
								<md-icon class="material-icons">search</md-icon>
								<input class="visible no_border" name="search" ng-model="$ctrl.search" placeholder="Búsqueda de ofertas">
							</md-input-container>
						</form>
					</div>
					<div layout-padding>
						<h4 class="filter_header trasparent">Categorías</h4>
						<div ng-repeat="cat in $ctrl.categories">
							<md-checkbox class="filter_input" ng-checked="exists(cat, $ctrl.category)" ng-click="toggle(cat,  $ctrl.category)">
								{{ cat.category_name }}
							</md-checkbox>
						</div>
						<h4 class="filter_header trasparent">Orden de las ofertas</h4>
						<md-select class="filter_input trasparent" ng-change="$ctrl.filter_bar()" placeholder="Orden" ng-model="$ctrl.sort_value">
							<md-option value="pub_date">Fecha de creación</md-option>
							<md-option value="activity_date">Fecha de la oferta</md-option>
						</md-select>
						<h4 class="filter_header trasparent">Búsqueda por fecha</h4>
						<md-datepicker flex ng-change="$ctrl.filter_bar()" ng-model="$ctrl.ini_date" md-placeholder="Fecha Inicial" md-min-date="$ctrl.min_date"></md-datepicker>
						<md-datepicker flex ng-change="$ctrl.filter_bar()" ng-model="$ctrl.fin_date" md-placeholder="Fecha Final" md-min-date="$ctrl.min_date"></md-datepicker>
					</div>
				</md-content>
			</div>
		</md-sidenav>
	</md-content>
</div>
<!--end Offer list -->
